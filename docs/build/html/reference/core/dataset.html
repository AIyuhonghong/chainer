

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Dataset abstraction &mdash; Chainer 2.0.0b1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/modified_theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Chainer 2.0.0b1 documentation" href="../../index.html"/>
        <link rel="up" title="Core functionalities" href="../core.html"/>
        <link rel="next" title="Training loop abstraction" href="training.html"/>
        <link rel="prev" title="Serializer" href="serializer.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Chainer
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0b1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Chainer Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Chainer Reference Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../core.html">Core functionalities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="variable.html">Variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="flag.html">Flag</a></li>
<li class="toctree-l3"><a class="reference internal" href="function.html">Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="link.html">Link and Chain</a></li>
<li class="toctree-l3"><a class="reference internal" href="optimizer.html">Optimizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="serializer.html">Serializer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Dataset abstraction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dataset-representation">Dataset representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iterator-interface">Iterator interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#batch-conversion-function">Batch conversion function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dataset-management">Dataset management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="training.html">Training loop abstraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="debug.html">Debug mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration.html">Configuring Chainer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../util.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../check.html">Assertion and Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions.html">Standard Function implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../links.html">Standard Link implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizers.html">Optimizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serializers.html">Serializers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../function_hooks.html">Function hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../initializers.html">Weight Initializers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datasets.html">Dataset examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iterators.html">Iterator examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions.html">Trainer extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../triggers.html">Trainer triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caffe.html">Caffe Reference Model Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graph.html">Visualization of Computational Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment.html">Environment variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribution.html">Chainer Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compatibility.html">API Compatibility Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tips.html">Tips and FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../comparison.html">Comparison with Other Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Chainer</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Chainer Reference Manual</a> &raquo;</li>
        
          <li><a href="../core.html">Core functionalities</a> &raquo;</li>
        
      <li>Dataset abstraction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/reference/core/dataset.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-chainer.dataset"></span><div class="section" id="dataset-abstraction">
<h1>Dataset abstraction<a class="headerlink" href="#dataset-abstraction" title="Permalink to this headline">Â¶</a></h1>
<p>Chainer has a support of common interface of training and validation datasets. The dataset support consists of three components: datasets, iterators, and batch conversion functions.</p>
<p><strong>Dataset</strong> represents a set of examples. The interface is only determined by combination with iterators you want to use on it. The built-in iterators of Chainer requires the dataset to support <code class="docutils literal"><span class="pre">__getitem__</span></code> and <code class="docutils literal"><span class="pre">__len__</span></code> method. In particular, the <code class="docutils literal"><span class="pre">__getitem__</span></code> method should support indexing by both an integer and a slice. We can easily support slice indexing by inheriting <a class="reference internal" href="#chainer.dataset.DatasetMixin" title="chainer.dataset.DatasetMixin"><code class="xref py py-class docutils literal"><span class="pre">DatasetMixin</span></code></a>, in which case users only have to implement <a class="reference internal" href="#chainer.dataset.DatasetMixin.get_example" title="chainer.dataset.DatasetMixin.get_example"><code class="xref py py-meth docutils literal"><span class="pre">get_example()</span></code></a> method for indexing. Some iterators also restrict the type of each example. Basically, datasets are considered as <cite>stateless</cite> objects, so that we do not need to save the dataset as a checkpoint of the training procedure.</p>
<p><strong>Iterator</strong> iterates over the dataset, and at each iteration, it yields a mini batch of examples as a list. Iterators should support the <a class="reference internal" href="#chainer.dataset.Iterator" title="chainer.dataset.Iterator"><code class="xref py py-class docutils literal"><span class="pre">Iterator</span></code></a> interface, which includes the standard iterator protocol of Python. Iterators manage where to read next, which means they are <cite>stateful</cite>.</p>
<p><strong>Batch conversion function</strong> converts the mini batch into arrays to feed to the neural nets. They are also responsible to send each array to an appropriate device. Chainer currently provides <a class="reference internal" href="#chainer.dataset.concat_examples" title="chainer.dataset.concat_examples"><code class="xref py py-func docutils literal"><span class="pre">concat_examples()</span></code></a> as the only example of batch conversion functions.</p>
<p>These components are all customizable, and designed to have a minimum interface to restrict the types of datasets and ways to handle them. In most cases, though, implementations provided by Chainer itself are enough to cover the usages.</p>
<p>Chainer also has a light system to download, manage, and cache concrete examples of datasets. All datasets managed through the system are saved under <cite>the dataset root directory</cite>, which is determined by the <code class="docutils literal"><span class="pre">CHAINER_DATASET_ROOT</span></code> environment variable, and can also be set by the <a class="reference internal" href="#chainer.dataset.set_dataset_root" title="chainer.dataset.set_dataset_root"><code class="xref py py-func docutils literal"><span class="pre">set_dataset_root()</span></code></a> function.</p>
<div class="section" id="dataset-representation">
<h2>Dataset representation<a class="headerlink" href="#dataset-representation" title="Permalink to this headline">Â¶</a></h2>
<p>See <a class="reference internal" href="../datasets.html#datasets"><span class="std std-ref">Dataset examples</span></a> for dataset implementations.</p>
<dl class="class">
<dt id="chainer.dataset.DatasetMixin">
<em class="property">class </em><code class="descclassname">chainer.dataset.</code><code class="descname">DatasetMixin</code><a class="reference internal" href="../../_modules/chainer/dataset/dataset_mixin.html#DatasetMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.DatasetMixin" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Default implementation of dataset indexing.</p>
<p>DatasetMixin provides the <code class="xref py py-meth docutils literal"><span class="pre">__getitem__()</span></code> operator. The default
implementation uses <a class="reference internal" href="#chainer.dataset.DatasetMixin.get_example" title="chainer.dataset.DatasetMixin.get_example"><code class="xref py py-meth docutils literal"><span class="pre">get_example()</span></code></a> to extract each example, and
combines the results into a list. This mixin makes it easy to implement a
new dataset that does not support efficient slicing.</p>
<p>Dataset implementation using DatasetMixin still has to provide the
<code class="xref py py-meth docutils literal"><span class="pre">__len__()</span></code> operator explicitly.</p>
<dl class="method">
<dt id="chainer.dataset.DatasetMixin.get_example">
<code class="descname">get_example</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/dataset_mixin.html#DatasetMixin.get_example"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.DatasetMixin.get_example" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns the i-th example.</p>
<p>Implementations should override it. It should raise <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IndexError" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">IndexError</span></code></a>
if the index is invalid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>i</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) â The index of the example.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The i-th example.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="iterator-interface">
<h2>Iterator interface<a class="headerlink" href="#iterator-interface" title="Permalink to this headline">Â¶</a></h2>
<p>See <a class="reference internal" href="../iterators.html#iterators"><span class="std std-ref">Iterator examples</span></a> for dataset iterator implementations.</p>
<dl class="class">
<dt id="chainer.dataset.Iterator">
<em class="property">class </em><code class="descclassname">chainer.dataset.</code><code class="descname">Iterator</code><a class="reference internal" href="../../_modules/chainer/dataset/iterator.html#Iterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.Iterator" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Base class of all dataset iterators.</p>
<p>Iterator iterates over the dataset, yielding a minibatch at each
iteration. Minibatch is a list of examples. Each implementation should
implement an iterator protocol (e.g., the <code class="xref py py-meth docutils literal"><span class="pre">__next__()</span></code> method).</p>
<p>Note that, even if the iterator supports setting the batch size, it does
not guarantee that each batch always contains the same number of examples.
For example, if you let the iterator to stop at the end of the sweep, the
last batch may contain a fewer number of examples.</p>
<p>The interface between the iterator and the underlying dataset is not fixed,
and up to the implementation.</p>
<p>Each implementation should provide the following attributes (not needed to
be writable).</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">batch_size</span></code>: Number of examples within each minibatch.</li>
<li><code class="docutils literal"><span class="pre">epoch</span></code>: Number of completed sweeps over the dataset.</li>
<li><code class="docutils literal"><span class="pre">epoch_detail</span></code>: Floating point number version of the epoch. For
example, if the iterator is at the middle of the dataset at the third
epoch, then this value is 2.5.</li>
<li><code class="docutils literal"><span class="pre">is_new_epoch</span></code>: <code class="docutils literal"><span class="pre">True</span></code> if the epoch count was incremented at the last
update.</li>
</ul>
<p>Each implementation should also support serialization to resume/suspend the
iteration.</p>
<dl class="method">
<dt id="chainer.dataset.Iterator.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/iterator.html#Iterator.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.Iterator.finalize" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Finalizes the iterator and possibly releases the resources.</p>
<p>This method does nothing by default. Implementation may override it to
better handle the internal resources.</p>
</dd></dl>

<dl class="method">
<dt id="chainer.dataset.Iterator.next">
<code class="descname">next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/iterator.html#Iterator.next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.Iterator.next" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Python2 alternative of <code class="docutils literal"><span class="pre">__next__</span></code>.</p>
<p>It calls <code class="xref py py-meth docutils literal"><span class="pre">__next__()</span></code> by default.</p>
</dd></dl>

<dl class="method">
<dt id="chainer.dataset.Iterator.serialize">
<code class="descname">serialize</code><span class="sig-paren">(</span><em>serializer</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/iterator.html#Iterator.serialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.Iterator.serialize" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Serializes the internal state of the iterator.</p>
<p>This is a method to support serializer protocol of Chainer.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It should only serialize the internal state that changes over the
iteration. It should not serializes what is set manually by
users such as the batch size.</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="batch-conversion-function">
<h2>Batch conversion function<a class="headerlink" href="#batch-conversion-function" title="Permalink to this headline">Â¶</a></h2>
<dl class="function">
<dt id="chainer.dataset.concat_examples">
<code class="descclassname">chainer.dataset.</code><code class="descname">concat_examples</code><span class="sig-paren">(</span><em>batch</em>, <em>device=None</em>, <em>padding=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/convert.html#concat_examples"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.concat_examples" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Concatenates a list of examples into array(s).</p>
<p>Dataset iterator yields a list of examples. If each example is an array,
this function concatenates them along the newly-inserted first axis (called
<cite>batch dimension</cite>) into one array. The basic behavior is same for examples
consisting of multiple arrays, i.e., corresponding arrays of all examples
are concatenated.</p>
<p>For instance, consider each example consists of two arrays <code class="docutils literal"><span class="pre">(x,</span> <span class="pre">y)</span></code>.
Then, this function concatenates <code class="docutils literal"><span class="pre">x</span></code> âs into one array, and <code class="docutils literal"><span class="pre">y</span></code> âs
into another array, and returns a tuple of these two arrays. Another
example: consider each example is a dictionary of two entries whose keys
are <code class="docutils literal"><span class="pre">'x'</span></code> and <code class="docutils literal"><span class="pre">'y'</span></code>, respectively, and values are arrays. Then, this
function concatenates <code class="docutils literal"><span class="pre">x</span></code> âs into one array, and <code class="docutils literal"><span class="pre">y</span></code> âs into another
array, and returns a dictionary with two entries <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">y</span></code> whose
values are the concatenated arrays.</p>
<p>When the arrays to concatenate have different shapes, the behavior depends
on the <code class="docutils literal"><span class="pre">padding</span></code> value. If <code class="docutils literal"><span class="pre">padding</span></code> is <code class="docutils literal"><span class="pre">None</span></code> (default), it raises
an error. Otherwise, it builds an array of the minimum shape that the
contents of all arrays can be substituted to. The padding value is then
used to the extra elements of the resulting arrays.</p>
<p>TODO(beam2d): Add an example.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>batch</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) â A list of examples. This is typically given by a dataset
iterator.</li>
<li><strong>device</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) â Device ID to which each array is sent. Negative value
indicates the host memory (CPU). If it is omitted, all arrays are
left in the original device.</li>
<li><strong>padding</strong> â Scalar value for extra elements. If this is None (default),
an error is raised on shape mismatch. Otherwise, an array of
minimum dimensionalities that can accommodate all arrays is
created, and elements outside of the examples are padded by this
value.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Array, a tuple of arrays, or a dictionary of arrays. The type depends
on the type of each example in the batch.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="chainer.dataset.to_device">
<code class="descclassname">chainer.dataset.</code><code class="descname">to_device</code><span class="sig-paren">(</span><em>device</em>, <em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/convert.html#to_device"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.to_device" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Send an array to a given device.</p>
<p>This method send a given array to a given device. This method is used in
<a class="reference internal" href="#chainer.dataset.concat_examples" title="chainer.dataset.concat_examples"><code class="xref py py-func docutils literal"><span class="pre">concat_examples()</span></code></a>.
You can also use this method in a custom converter method used in
<a class="reference internal" href="training.html#chainer.training.Updater" title="chainer.training.Updater"><code class="xref py py-class docutils literal"><span class="pre">Updater</span></code></a> and <a class="reference internal" href="training.html#chainer.training.Extension" title="chainer.training.Extension"><code class="xref py py-class docutils literal"><span class="pre">Extension</span></code></a>
such as <a class="reference internal" href="training.html#chainer.training.StandardUpdater" title="chainer.training.StandardUpdater"><code class="xref py py-class docutils literal"><span class="pre">StandardUpdater</span></code></a> and
<a class="reference internal" href="../extensions.html#chainer.training.extensions.Evaluator" title="chainer.training.extensions.Evaluator"><code class="xref py py-class docutils literal"><span class="pre">Evaluator</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>device</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a>) â Device ID to which an array is sent. If it is
negative value, an array is sent to CPU. If it is positive, an
array is sent to GPU with the given ID. If it is <code class="docutils literal"><span class="pre">None</span></code>, an
array is left in the original device.</li>
<li><strong>x</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.13)"><em>numpy.ndarray</em></a><em> or </em><em>cupy.ndarray</em>) â An array to send.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Converted array.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="dataset-management">
<h2>Dataset management<a class="headerlink" href="#dataset-management" title="Permalink to this headline">Â¶</a></h2>
<dl class="function">
<dt id="chainer.dataset.get_dataset_root">
<code class="descclassname">chainer.dataset.</code><code class="descname">get_dataset_root</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/download.html#get_dataset_root"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.get_dataset_root" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Gets the path to the root directory to download and cache datasets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The path to the dataset root directory.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="chainer.dataset.set_dataset_root">
<code class="descclassname">chainer.dataset.</code><code class="descname">set_dataset_root</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/download.html#set_dataset_root"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.set_dataset_root" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Sets the root directory to download and cache datasets.</p>
<p>There are two ways to set the dataset root directory. One is by setting the
environment variable <code class="docutils literal"><span class="pre">CHAINER_DATASET_ROOT</span></code>. The other is by using this
function. If both are specified, one specified via this function is used.
The default dataset root is <code class="docutils literal"><span class="pre">$HOME/.chainer/dataset</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) â Path to the new dataset root directory.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="chainer.dataset.cached_download">
<code class="descclassname">chainer.dataset.</code><code class="descname">cached_download</code><span class="sig-paren">(</span><em>url</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/download.html#cached_download"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.cached_download" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Downloads a file and caches it.</p>
<p>It downloads a file from the URL if there is no corresponding cache. After
the download, this function stores a cache to the directory under the
dataset root (see <a class="reference internal" href="#chainer.dataset.set_dataset_root" title="chainer.dataset.set_dataset_root"><code class="xref py py-func docutils literal"><span class="pre">set_dataset_root()</span></code></a>). If there is already a cache
for the given URL, it just returns the path to the cache without
downloading the same file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) â URL to download from.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Path to the downloaded file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="chainer.dataset.cache_or_load_file">
<code class="descclassname">chainer.dataset.</code><code class="descname">cache_or_load_file</code><span class="sig-paren">(</span><em>path</em>, <em>creator</em>, <em>loader</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/chainer/dataset/download.html#cache_or_load_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#chainer.dataset.cache_or_load_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Caches a file if it does not exist, or loads it otherwise.</p>
<p>This is a utility function used in dataset loading routines. The
<code class="docutils literal"><span class="pre">creator</span></code> creates the file to given path, and returns the content. If the
file already exists, the <code class="docutils literal"><span class="pre">loader</span></code> is called instead, and it loads the
file and returns the content.</p>
<p>Note that the path passed to the creator is temporary one, and not same as
the path given to this function. This function safely renames the file
created by the creator to a given path, even if this function is called
simultaneously by multiple threads or processes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) â Path to save the cached file.</li>
<li><strong>creator</strong> â Function to create the file and returns the content. It takes
a path to temporary place as the argument. Before calling the
creator, there is no file at the temporary path.</li>
<li><strong>loader</strong> â Function to load the cached file and returns the content.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">It returns the returned values by the creator or the loader.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="training.html" class="btn btn-neutral float-right" title="Training loop abstraction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="serializer.html" class="btn btn-neutral" title="Serializer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Preferred Networks, inc. and Preferred Infrastructure, inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.0.0b1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>